{"ast":null,"code":"// Use proxy in development, direct URL in production\nconst BASE_URL = process.env.NODE_ENV === 'production' ? 'https://world.openfoodfacts.org' : '';\nclass OpenFoodFactsAPI {\n  // Fetch products with pagination\n  static async getProducts(page = 1, pageSize = 20, category = '', search = '') {\n    try {\n      let url = `${BASE_URL}/cgi/search.pl?json=true&page=${page}&page_size=${pageSize}`;\n      if (category) {\n        url = `${BASE_URL}/category/${category}.json?page=${page}&page_size=${pageSize}`;\n      }\n      if (search) {\n        url += `&search_terms=${encodeURIComponent(search)}`;\n      }\n      const response = await fetch(url, {\n        mode: 'cors',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        products: data.products || [],\n        total: data.count || 0,\n        page: page,\n        pageSize: pageSize\n      };\n    } catch (error) {\n      console.error('Error fetching products:', error);\n\n      // Handle specific error types\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        throw new Error('Network error. Please check your internet connection and try again.');\n      }\n      if (error.message.includes('CORS')) {\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\n      }\n      throw new Error('Failed to fetch products. Please try again later.');\n    }\n  }\n\n  // Search product by barcode\n  static async getProductByBarcode(barcode) {\n    try {\n      const response = await fetch(`${BASE_URL}/api/v0/product/${barcode}.json`, {\n        mode: 'cors',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.status === 0) {\n        throw new Error('Product not found');\n      }\n      return data.product;\n    } catch (error) {\n      console.error('Error fetching product by barcode:', error);\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        throw new Error('Network error. Please check your internet connection and try again.');\n      }\n      if (error.message.includes('CORS')) {\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\n      }\n      throw new Error(error.message || 'Failed to fetch product. Please check the barcode.');\n    }\n  }\n\n  // Get product categories\n  static async getCategories() {\n    try {\n      const response = await fetch(`${BASE_URL}/categories.json`, {\n        mode: 'cors',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return data.tags || [];\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\n        throw new Error('Network error. Please check your internet connection and try again.');\n      }\n      if (error.message.includes('CORS')) {\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\n      }\n      throw new Error('Failed to fetch categories. Please try again later.');\n    }\n  }\n\n  // Get product image URL with fallback\n  static getProductImage(product, size = 'small') {\n    const sizes = {\n      small: '400',\n      // Better quality for small images\n      medium: '400',\n      // Standard medium size\n      large: 'full' // Full size for details\n    };\n\n    // Try different image sizes in order of preference\n    const imageKeys = [`image_${sizes[size]}_url`, 'image_front_url', 'image_url', 'image_small_url', 'image_thumb_url'];\n    for (const key of imageKeys) {\n      if (product[key]) {\n        return product[key];\n      }\n    }\n\n    // Return a placeholder if no image is available\n    return '/placeholder-food.svg';\n  }\n}\nexport default OpenFoodFactsAPI;","map":{"version":3,"names":["BASE_URL","process","env","NODE_ENV","OpenFoodFactsAPI","getProducts","page","pageSize","category","search","url","encodeURIComponent","response","fetch","mode","headers","ok","Error","status","data","json","products","total","count","error","console","name","message","includes","getProductByBarcode","barcode","product","getCategories","tags","getProductImage","size","sizes","small","medium","large","imageKeys","key"],"sources":["C:/Users/pranj/Desktop/FoodApp/src/services/openFoodFactsApi.js"],"sourcesContent":["// Use proxy in development, direct URL in production\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n  ? 'https://world.openfoodfacts.org'\r\n  : '';\r\n\r\nclass OpenFoodFactsAPI {\r\n  // Fetch products with pagination\r\n  static async getProducts(page = 1, pageSize = 20, category = '', search = '') {\r\n    try {\r\n      let url = `${BASE_URL}/cgi/search.pl?json=true&page=${page}&page_size=${pageSize}`;\r\n\r\n      if (category) {\r\n        url = `${BASE_URL}/category/${category}.json?page=${page}&page_size=${pageSize}`;\r\n      }\r\n\r\n      if (search) {\r\n        url += `&search_terms=${encodeURIComponent(search)}`;\r\n      }\r\n\r\n      const response = await fetch(url, {\r\n        mode: 'cors',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return {\r\n        products: data.products || [],\r\n        total: data.count || 0,\r\n        page: page,\r\n        pageSize: pageSize\r\n      };\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n\r\n      // Handle specific error types\r\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\r\n        throw new Error('Network error. Please check your internet connection and try again.');\r\n      }\r\n\r\n      if (error.message.includes('CORS')) {\r\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\r\n      }\r\n\r\n      throw new Error('Failed to fetch products. Please try again later.');\r\n    }\r\n  }\r\n\r\n  // Search product by barcode\r\n  static async getProductByBarcode(barcode) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/api/v0/product/${barcode}.json`, {\r\n        mode: 'cors',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.status === 0) {\r\n        throw new Error('Product not found');\r\n      }\r\n\r\n      return data.product;\r\n    } catch (error) {\r\n      console.error('Error fetching product by barcode:', error);\r\n\r\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\r\n        throw new Error('Network error. Please check your internet connection and try again.');\r\n      }\r\n\r\n      if (error.message.includes('CORS')) {\r\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\r\n      }\r\n\r\n      throw new Error(error.message || 'Failed to fetch product. Please check the barcode.');\r\n    }\r\n  }\r\n\r\n  // Get product categories\r\n  static async getCategories() {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/categories.json`, {\r\n        mode: 'cors',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      return data.tags || [];\r\n    } catch (error) {\r\n      console.error('Error fetching categories:', error);\r\n\r\n      if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {\r\n        throw new Error('Network error. Please check your internet connection and try again.');\r\n      }\r\n\r\n      if (error.message.includes('CORS')) {\r\n        throw new Error('Unable to connect to food database. Please try again in a few moments.');\r\n      }\r\n\r\n      throw new Error('Failed to fetch categories. Please try again later.');\r\n    }\r\n  }\r\n\r\n  // Get product image URL with fallback\r\n  static getProductImage(product, size = 'small') {\r\n    const sizes = {\r\n      small: '400',      // Better quality for small images\r\n      medium: '400',     // Standard medium size\r\n      large: 'full'      // Full size for details\r\n    };\r\n\r\n    // Try different image sizes in order of preference\r\n    const imageKeys = [\r\n      `image_${sizes[size]}_url`,\r\n      'image_front_url',\r\n      'image_url',\r\n      'image_small_url',\r\n      'image_thumb_url'\r\n    ];\r\n\r\n    for (const key of imageKeys) {\r\n      if (product[key]) {\r\n        return product[key];\r\n      }\r\n    }\r\n\r\n    // Return a placeholder if no image is available\r\n    return '/placeholder-food.svg';\r\n  }\r\n}\r\n\r\nexport default OpenFoodFactsAPI;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}